<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluaci√≥n BPM - M√≥dulo 1</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #16a34a;
            --accent: #f59e0b;
            --bg: #f8fafc;
            --text: #1e293b;
            --white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }

        body { background-color: var(--bg); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; align-items: center; }

        /* Header App Style */
        header {
            background-color: var(--primary);
            width: 100%;
            padding: 1rem;
            text-align: center;
            color: var(--white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            z-index: 100;
        }

        .container {
            margin-top: 80px;
            width: 90%;
            max-width: 600px;
            padding-bottom: 50px;
        }

        /* Card Styles */
        .card {
            background: var(--white);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .hidden { display: none; }

        /* Buttons */
        .btn {
            background-color: var(--primary);
            color: var(--white);
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            margin: 10px;
            width: 80%;
            max-width: 300px;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3); }
        .btn-secondary { background-color: var(--secondary); }
        .btn-option { 
            background-color: var(--white); 
            color: var(--text); 
            border: 2px solid #e2e8f0; 
            width: 100%;
            margin: 8px 0;
        }
        .btn-option:hover { background-color: #f1f5f9; border-color: var(--primary); }

        /* Game Elements */
        .score-board {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--primary);
            font-weight: bold;
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
        }
        .correct { background-color: #dcfce7; color: #166534; }
        .incorrect { background-color: #fee2e2; color: #991b1b; }

        /* True/False Game */
        .tf-card {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            background: #f1f5f9;
            border-radius: 10px;
            margin: 20px 0;
            padding: 20px;
        }

        .tf-buttons { display: flex; gap: 10px; justify-content: center; }
        .btn-true { background-color: var(--secondary); flex: 1; }
        .btn-false { background-color: #ef4444; flex: 1; }

        /* Icon Animation */
        .icon-large { font-size: 4rem; color: var(--primary); margin-bottom: 20px; }

    </style>
</head>
<body>

    <header>
        <h2><i class="fas fa-shield-alt"></i> BPM Master App</h2>
    </header>

    <div class="container">
        
        <!-- HOME SCREEN -->
        <div id="home-screen" class="card">
            <i class="fas fa-user-shield icon-large"></i>
            <h1>M√≥dulo 1: BPM</h1>
            <p>Pon a prueba tus conocimientos sobre higiene y manipulaci√≥n de alimentos.</p>
            <br>
            <button class="btn" onclick="startQuiz()">üìù Iniciar Quiz</button>
            <button class="btn btn-secondary" onclick="startTFGame()">‚úÖ Verdadero o Falso</button>
        </div>

        <!-- QUIZ SCREEN -->
        <div id="quiz-screen" class="card hidden">
            <div class="score-board">Pregunta <span id="q-current">1</span>/5</div>
            <h3 id="q-text" style="margin-bottom: 20px;">Pregunta aqu√≠</h3>
            <div id="q-options">
                <!-- Options inserted by JS -->
            </div>
            <div id="q-feedback" class="feedback hidden"></div>
            <button id="next-btn" class="btn hidden" onclick="nextQuestion()">Siguiente</button>
        </div>

        <!-- TRUE/FALSE GAME SCREEN -->
        <div id="tf-screen" class="card hidden">
            <div class="score-board">Aciertos: <span id="tf-score">0</span></div>
            <p>Lee la afirmaci√≥n y decide:</p>
            <div class="tf-card" id="tf-statement">
                Afirmaci√≥n aqu√≠...
            </div>
            <div class="tf-buttons">
                <button class="btn btn-true" onclick="checkTF(true)">Verdadero</button>
                <button class="btn btn-false" onclick="checkTF(false)">Falso</button>
            </div>
            <div id="tf-feedback" class="feedback hidden"></div>
        </div>

        <!-- RESULT SCREEN -->
        <div id="result-screen" class="card hidden">
            <i class="fas fa-trophy icon-large" style="color: var(--accent);"></i>
            <h1>¬°Completado!</h1>
            <p id="final-msg">Has terminado la actividad.</p>
            <h2 id="final-score" style="margin: 20px 0; color: var(--primary);"></h2>
            <button class="btn" onclick="goHome()">Volver al Inicio</button>
        </div>

    </div>

    <script>
        // --- DATA ---
        const quizData = [
            {
                question: "¬øCu√°l es el objetivo principal de las BPM?",
                options: ["Mejorar el sabor de la comida", "Garantizar la inocuidad y disminuir riesgos", "Aumentar los precios", "Decorar los platos"],
                correct: 1
            },
            {
                question: "¬øCada cu√°nto debe lavarse las manos un manipulador?",
                options: ["Solo al llegar al trabajo", "Cada 4 horas", "Al cambiar de actividad o ensuciarse", "Antes de irse"],
                correct: 2
            },
            {
                question: "¬øCu√°l norma regula las BPM en Colombia?",
                options: ["Resoluci√≥n 2674 de 2013", "Ley 100", "C√≥digo de Polic√≠a", "Norma ISO 9001"],
                correct: 0
            },
            {
                question: "¬øQu√© caracter√≠stica debe tener el uniforme?",
                options: ["Color oscuro para ocultar manchas", "Color claro y sin botones", "Con muchos bolsillos", "De lana"],
                correct: 1
            },
            {
                question: "¬øCu√°les son los 4 programas de saneamiento?",
                options: ["Ventas, Marketing, Finanzas, RRHH", "Cocina, Ba√±o, Bodega, Sal√≥n", "Limpieza, Plagas, Residuos, Agua", "Fr√≠o, Calor, Tibio, Congelado"],
                correct: 2
            }
        ];

        const tfData = [
            { text: "El uso de maquillaje y joyas est√° permitido si se lavan bien.", isTrue: false },
            { text: "Los pisos deben ser antideslizantes e impermeables.", isTrue: true },
            { text: "La contaminaci√≥n cruzada ocurre al mezclar alimentos crudos con cocidos.", isTrue: true },
            { text: "Si tengo gripa leve puedo manipular alimentos usando tapabocas.", isTrue: false },
            { text: "El acero inoxidable es el material recomendado para equipos.", isTrue: true }
        ];

        // --- STATE ---
        let currentQ = 0;
        let score = 0;
        let currentTF = 0;
        let tfScore = 0;

        // --- NAVIGATION FUNCTIONS ---
        function showScreen(id) {
            document.querySelectorAll('.container > div').forEach(div => div.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        function goHome() {
            showScreen('home-screen');
        }

        // --- QUIZ LOGIC ---
        function startQuiz() {
            currentQ = 0;
            score = 0;
            showScreen('quiz-screen');
            loadQuestion();
        }

        function loadQuestion() {
            const q = quizData[currentQ];
            document.getElementById('q-current').innerText = currentQ + 1;
            document.getElementById('q-text').innerText = q.question;
            const optsDiv = document.getElementById('q-options');
            optsDiv.innerHTML = '';
            document.getElementById('q-feedback').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');

            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'btn btn-option';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(index);
                optsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selected) {
            const correct = quizData[currentQ].correct;
            const feedback = document.getElementById('q-feedback');
            const btns = document.querySelectorAll('.btn-option');
            
            btns.forEach(btn => btn.disabled = true); // Disable all

            if (selected === correct) {
                score++;
                feedback.innerText = "¬°Correcto! Muy bien.";
                feedback.className = "feedback correct";
                btns[selected].style.backgroundColor = "#dcfce7";
                btns[selected].style.borderColor = "#166534";
            } else {
                feedback.innerText = "Incorrecto. La respuesta era: " + quizData[currentQ].options[correct];
                feedback.className = "feedback incorrect";
                btns[selected].style.backgroundColor = "#fee2e2";
                btns[correct].style.backgroundColor = "#dcfce7";
            }
            feedback.classList.remove('hidden');
            document.getElementById('next-btn').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQ++;
            if (currentQ < quizData.length) {
                loadQuestion();
            } else {
                showResult(score, quizData.length, "Quiz");
            }
        }

        // --- TRUE/FALSE LOGIC ---
        function startTFGame() {
            currentTF = 0;
            tfScore = 0;
            showScreen('tf-screen');
            loadTF();
        }

        function loadTF() {
            document.getElementById('tf-score').innerText = tfScore;
            document.getElementById('tf-statement').innerText = tfData[currentTF].text;
            document.getElementById('tf-feedback').classList.add('hidden');
            document.querySelector('.tf-buttons').style.pointerEvents = 'auto'; // Enable buttons
        }

        function checkTF(choice) {
            const correct = tfData[currentTF].isTrue;
            const feedback = document.getElementById('tf-feedback');
            document.querySelector('.tf-buttons').style.pointerEvents = 'none'; // Disable buttons

            if (choice === correct) {
                tfScore++;
                feedback.innerText = "¬°As√≠ es!";
                feedback.className = "feedback correct";
            } else {
                feedback.innerText = "Error. Repasa el manual.";
                feedback.className = "feedback incorrect";
            }
            feedback.classList.remove('hidden');

            setTimeout(() => {
                currentTF++;
                if (currentTF < tfData.length) {
                    loadTF();
                } else {
                    showResult(tfScore, tfData.length, "Verdadero o Falso");
                }
            }, 1500);
        }

        // --- RESULT LOGIC ---
        function showResult(finalScore, total, activityName) {
            showScreen('result-screen');
            const percentage = (finalScore / total) * 100;
            let msg = "";
            if (percentage === 100) msg = "¬°Excelente! Eres un experto en BPM.";
            else if (percentage >= 60) msg = "Buen trabajo, pero puedes mejorar.";
            else msg = "Debes repasar el M√≥dulo 1.";

            document.getElementById('final-msg').innerText = `${activityName}: ${msg}`;
            document.getElementById('final-score').innerText = `${finalScore} / ${total}`;
        }

    </script>
</body>
</html>